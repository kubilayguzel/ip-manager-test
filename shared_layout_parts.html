<aside class="sidebar">
    <div class="sidebar-header">
        <a href="dashboard.html" class="sidebar-logo">🔥 IP Manager</a>
    </div>
    <nav class="sidebar-nav">
        <div class="accordion">
            <div class="accordion-header"><span class="nav-icon">👥</span><span>Kişi Yönetimi</span></div>
            <div class="accordion-content">
                <a href="persons.html">Kişiler Yönetimi</a>
                <a href="user-management.html">Kullanıcı Yönetimi</a>
            </div>
        </div>
       <div class="nav-category-title">Finans</div>
        <a href="accruals.html" class="sidebar-nav-item"><span class="nav-icon">💰</span><span>Tahakkuklarım</span></a>
        <div class="nav-category-title">Araçlar</div>
        <!-- GÜNCELLENMIŞ: indexing.html → bulk-indexing-page.html -->
        <a href="bulk-indexing-page.html" class="sidebar-nav-item"><span class="nav-icon">📁</span><span>Belge İndeksleme</span></a>
        <a href="#" class="sidebar-nav-item" style="opacity: 0.5; cursor: not-allowed;"><span class="nav-icon">📈</span><span>Raporlar</span></a>
        <a href="#" class="sidebar-nav-item" style="opacity: 0.5; cursor: not-allowed;"><span class="nav-icon">🔧</span><span>Ayarlar</span></a>
    </nav>
</aside>

<header class="top-header">
    <div class="user-section">
        <div class="user-avatar" id="userAvatar">?</div>
        <div class="user-info">
            <div class="user-name" id="userName">Yükleniyor...</div>
            <div class="user-role" id="userRole">Kullanıcı</div>
        </div>
        <button class="logout-btn" id="logoutBtn">Çıkış</button>
    </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const currentPage = window.location.pathname.split('/').pop();

  // Aktif linki bul ve işaretle
  let activeLink = null;
  document.querySelectorAll('.sidebar-nav-item, .accordion-content a').forEach(link => {
    const href = link.getAttribute('href');
    if (href && href === currentPage) {
      link.classList.add('active');
      activeLink = link;
    } else {
      link.classList.remove('active');
    }
  });

  if (activeLink) {
    // Ait olduğu accordion'ı aç
    const accordionContent = activeLink.closest('.accordion-content');
    if (accordionContent) {
      accordionContent.style.display = 'block';

      // Accordion başlığını açılmış olarak işaretle
      const accordionHeader = accordionContent.previousElementSibling;
      if (accordionHeader) accordionHeader.classList.add('open');

      // Diğer accordion'ları kapat
      document.querySelectorAll('.accordion-content').forEach(content => {
        if (content !== accordionContent) {
          content.style.display = 'none';
          const otherHeader = content.previousElementSibling;
          if (otherHeader) otherHeader.classList.remove('open');
        }
      });
    } else {
      // Link accordion dışında ise tüm accordion'ları kapat
      document.querySelectorAll('.accordion-content').forEach(content => {
        content.style.display = 'none';
        const otherHeader = content.previousElementSibling;
        if (otherHeader) otherHeader.classList.remove('open');
      });
    }
  }
});
</script>

</header>